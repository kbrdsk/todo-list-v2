(this["webpackJsonptodo-list-v2"]=this["webpackJsonptodo-list-v2"]||[]).push([[0],{15:function(t,e,n){t.exports=n(24)},20:function(t,e,n){},21:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){"use strict";n.r(e),n.d(e,"navigator",(function(){return Z})),n.d(e,"itemManager",(function(){return $}));var a=n(1),o=n(2),i=n(5),c=n(4),r=n(3),s=n(0),l=n.n(s),u=n(13),d=n.n(u),p=(n(20),function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{id:"nav-menu"},l.a.createElement("button",{className:"projects",onClick:this.navTo("projects")},"Projects"),l.a.createElement("button",{className:"categories",onClick:this.navTo("categories")},"Categories"),l.a.createElement("button",{className:"contacts",onClick:this.navTo("contacts")},"Contacts"))}},{key:"navTo",value:function(t){return function(){return Z.goTo($[t])}}}]),n}(l.a.Component)),h=n(14),m=n(9),f=n(10),v=Object(f.a)("generators"),g=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;Object(a.a)(this,n),o=e.call(this,t),Object.defineProperty(Object(i.a)(o),v,{writable:!0,value:{todo:$.todos.add,project:$.projects.add,category:$.categories.add,contact:$.contacts.add}});var c=Object(m.a)(Object(i.a)(o),v)[v][o.props.type],r={};return o.state={attributes:r},Object.defineProperty(o.props.carrier,"item",{get:function(){var t=c(r.first,r.last);for(var e in r)t[e]=r[e];return t}}),o}return Object(o.a)(n,[{key:"updateAttr",value:function(t,e){this.setState({attributes:Object.assign(this.state.attributes,Object(h.a)({},t,e.target.value))})}},{key:"render",value:function(){var t=this.props.type;return l.a.createElement("div",{className:"item-form"},["project","todo","category"].includes(t)?l.a.createElement("input",{type:"text",placeholder:"Title",onChange:this.updateAttr.bind(this,"title")}):null,["project","todo"].includes(t)?l.a.createElement("input",{type:"text",placeholder:"Description",onChange:this.updateAttr.bind(this,"description")}):null,"contact"===t?l.a.createElement("input",{type:"text",placeholder:"First",onChange:this.updateAttr.bind(this,"first")}):null,"contact"===t?l.a.createElement("input",{type:"text",placeholder:"Last",onChange:this.updateAttr.bind(this,"last")}):null,"contact"===t?l.a.createElement("input",{type:"email",placeholder:"email@domain",onChange:this.updateAttr.bind(this,"email")}):null,"contact"===t?l.a.createElement("input",{type:"tel",placeholder:"(xxx) xxx-xxxx",onChange:this.updateAttr.bind(this,"phone")}):null,"contact"===t?l.a.createElement("input",{type:"text",placeholder:"Organization",onChange:this.updateAttr.bind(this,"organization")}):null)}}]),n}(l.a.Component),b=Object(f.a)("collections"),y=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;return Object(a.a)(this,n),o=e.call(this,t),Object.defineProperty(Object(i.a)(o),b,{writable:!0,value:{todo:$.todos,project:$.projects,category:$.categories,contact:$.contacts}}),o.state={selection:null},o.destination=o.props.destination,o.type=o.props.type,o.renderSelection=o.renderSelection.bind(Object(i.a)(o)),o}return Object(o.a)(n,[{key:"selectItem",value:function(t){this.props.carrier.item=t,this.setState({selection:t})}},{key:"renderSelection",value:function(t){var e=this;return l.a.createElement("div",{onClick:function(){return e.selectItem(t)},className:t===this.state.selection?"selected":""},t.title||t.contactName.last+", "+t.contactName.first)}},{key:"todoFilter",value:function(){var t=this.props.context,e=this.destination.list();return function(n){return!e.includes(n)&&!(n===t)&&!("project"===t.itemType&&t.isChildOf(n))}}},{key:"tagFilter",value:function(){var t=this.props.context;return function(e){return!(e===t)&&!("project"===e.itemType&&e.isChildOf(t))&&!e.todoList.list().includes(t)}}},{key:"contactFilter",value:function(){var t=this.props.context;return"category"===t.itemType?function(e){return!e.tags.list().includes(t)}:function(e){return!e.todoList.list().includes(t)}}},{key:"render",value:function(){var t=this.destination.tags?this.tagFilter():this.destination.contact?this.contactFilter():this.todoFilter(),e=Object(m.a)(this,b)[b][this.type];return l.a.createElement("div",{className:"item-form"},e.filter(t).map(this.renderSelection))}}]),n}(l.a.Component),j=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).handleSubmit=o.handleSubmit.bind(Object(i.a)(o)),o.carrier={},o}return Object(o.a)(n,[{key:"handleSubmit",value:function(t){this.props.destination.add(this.carrier.item),Z.hideAddWindow()}},{key:"render",value:function(){return l.a.createElement("div",{className:"popup",onClick:function(t){return t.stopPropagation()}},this.props.new?l.a.createElement(g,{carrier:this.carrier,type:this.props.type}):l.a.createElement(y,{carrier:this.carrier,type:this.props.type,destination:this.props.destination,context:this.props.context}),l.a.createElement("button",{onClick:this.handleSubmit},"Add"))}}]),n}(l.a.Component),O=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"next",value:function(t,e){var n=this;return function(){return n.props.next(t,e)}}},{key:"render",value:function(){var t=!!this.props.destination.tags,e=this.props.destination.contact,n=this.props.context;return l.a.createElement("div",{className:"popup",onClick:function(t){return t.stopPropagation()}},e||t||"category"===n?null:l.a.createElement("button",{onClick:this.next(!0,"todo")},"New Todo"),e||t||"category"===n?null:l.a.createElement("button",{onClick:this.next(!1,"todo")},"Existing Todo"),e?null:l.a.createElement("button",{onClick:this.next(!0,"project")},"New Project"),e?null:l.a.createElement("button",{onClick:this.next(!1,"project")},"Existing Project"),t?l.a.createElement("button",{onClick:this.next(!0,"category")},"New Category"):null,t?l.a.createElement("button",{onClick:this.next(!1,"category")},"Existing Category"):null,e?l.a.createElement("button",{onClick:this.next(!0,"contact")},"New Contact"):null,e?l.a.createElement("button",{onClick:this.next(!1,"contact")},"Existing Contact"):null)}}]),n}(l.a.Component),E=(n(21),function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).backToTypeSelect=o.backToTypeSelect.bind(Object(i.a)(o)),o.goToItemDetermination=o.goToItemDetermination.bind(Object(i.a)(o)),o.state={typeSelection:!!o.props.context.itemType,newItem:!0,itemType:o.props.context.collectionType},o}return Object(o.a)(n,[{key:"backToTypeSelect",value:function(t){t.stopPropagation(),this.setState({typeSelection:!0})}},{key:"goToItemDetermination",value:function(t,e){this.setState({typeSelection:!1,newItem:t,itemType:e})}},{key:"render",value:function(){return l.a.createElement("div",{id:"popup-background",onClick:function(){return Z.hideAddWindow()}},l.a.createElement("div",{id:"popup-container"},this.props.context.itemType&&!this.state.typeSelection?l.a.createElement("button",{className:"back",onClick:this.backToTypeSelect},"Back"):null,this.state.typeSelection?l.a.createElement(O,{next:this.goToItemDetermination,destination:this.props.destination,context:this.props.context.itemType}):l.a.createElement(j,{destination:this.props.destination,type:this.state.itemType,new:this.state.newItem,context:this.props.context})))}}]),n}(l.a.Component)),C=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;Object(a.a)(this,n),o=e.call(this,t);var i=t.item;return o.addContact={add:function(t){i&&("category"===i.itemType?t.tags.add(i):t.todoList.add(i))},contact:!0},o}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=this.props.item,n=e?$.contacts.filter((function(t){return"category"!==e.itemType?t.todoList.list().includes(e):t.tags.list().includes(e)})):$.contacts;return l.a.createElement("div",{className:"contact-list"},n.map((function(e){return t.renderContact(e)})),l.a.createElement("div",{className:"contact",onClick:function(){return Z.showAddWindow(t.addContact)}},"Add Contact"))}},{key:"renderContact",value:function(t){var e=this;return l.a.createElement("div",{className:"contact",key:t.storageId},l.a.createElement("span",{onClick:function(){return Z.goTo(t)}},"".concat(t.contactName.last,", ").concat(t.contactName.first)),l.a.createElement("button",{className:"delete",onClick:function(){var n=e.props.item;n?t.todoList.remove(n):$.contacts.remove(t),Z.goTo(n||$.contacts)}},"\u2715"))}}]),n}(l.a.Component),w=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"collection"},l.a.createElement("h2",null,"Projects"),$.projects.map(this.renderProject),l.a.createElement("div",{className:"project",onClick:function(){return Z.showAddWindow()}},"Add Project"))}},{key:"renderProject",value:function(t){return l.a.createElement("div",{className:"project",key:t.storageId},l.a.createElement("span",{onClick:N(t)},t.title),l.a.createElement("button",{className:"delete",onClick:function(){$.projects.remove(t),Z.goTo($.projects)}},"\u2715"))}}]),n}(l.a.Component),k=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"collection"},l.a.createElement("h2",null,"Categories"),$.categories.map(this.renderCategory),l.a.createElement("div",{className:"category",onClick:function(){return Z.showAddWindow()}},"Add Category"))}},{key:"renderCategory",value:function(t){return l.a.createElement("div",{className:"category",key:t.storageId},l.a.createElement("span",{onClick:N(t)},t.title),l.a.createElement("button",{className:"delete",onClick:function(){$.categories.remove(t),Z.goTo($.categories)}},"\u2715"))}}]),n}(l.a.Component),T=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Contacts"),l.a.createElement(C,null))}}]),n}(l.a.Component);function N(t){return function(){return Z.goTo(t)}}var x=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=this.props.focus.todoList.list();return l.a.createElement("div",{className:"todo-list"},e.map((function(e){return t.renderItem(e)})),this.renderAddButton())}},{key:"renderItem",value:function(t){var e=this;return l.a.createElement("div",{className:"todo-list-item",key:t.storageId},l.a.createElement("div",{className:"checkbox"+(t.isDone?" done":""),onClick:this.toggleDone.bind(this,t)}),l.a.createElement("div",{onClick:function(){return Z.goTo(t)}},t.title),l.a.createElement("button",{onClick:function(){e.props.focus.todoList.remove(t),t.tags.remove(e.props.focus),Z.goTo(e.props.focus)},className:"delete"},"\u2715"))}},{key:"toggleDone",value:function(t){t.isDone=!t.isDone,Z.goTo(this.props.focus)}},{key:"renderAddButton",value:function(){var t=this.props.focus,e="category"===t.itemType?"Add Project":"Add Todo";return l.a.createElement("div",{className:"todo-list-item",onClick:function(){return Z.showAddWindow(t.todoList)}},e)}}]),n}(l.a.Component),S=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=this.props.focus.tags.list();return l.a.createElement("div",{className:"tag-list"},l.a.createElement("div",{className:"item",onClick:function(){return Z.showAddWindow(t.props.focus.tags)}},"+ New Tag"),e.map((function(e){return t.renderItem(e)})))}},{key:"renderItem",value:function(t){var e=this;return l.a.createElement("div",{className:"item",key:t.storageId},l.a.createElement("span",{onClick:function(){return Z.goTo(t)}},t.title),l.a.createElement("button",{className:"delete",onClick:function(){t.todoList.remove(e.props.focus),e.props.focus.tags.remove(t),Z.goTo(e.props.focus)}},"\u2715"))}}]),n}(l.a.Component),I=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).state={showContacts:!1},o.toggleView=o.toggleView.bind(Object(i.a)(o)),o}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props.focus;return l.a.createElement("div",{className:"item-display"},l.a.createElement("h2",null,t.title),t.description?l.a.createElement("p",null,t.description):null,l.a.createElement("button",{onClick:this.toggleView},this.state.showContacts?"Todo List":"Contacts"),this.state.showContacts?l.a.createElement(C,{item:t}):l.a.createElement(x,{focus:t}),l.a.createElement(S,{focus:t}))}},{key:"toggleView",value:function(){this.setState({showContacts:!this.state.showContacts})}}]),n}(l.a.Component),L=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).state={showContacts:!1},o.toggleView=o.toggleView.bind(Object(i.a)(o)),o}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props.focus;return l.a.createElement("div",{className:"item-display"},l.a.createElement("h2",null,t.title),l.a.createElement("p",null,t.description),l.a.createElement("button",{onClick:this.toggleView},this.state.showContacts?"Hide Contacts":"Show Contacts"),this.state.showContacts?l.a.createElement(C,{item:t}):null,l.a.createElement(S,{focus:t}))}},{key:"toggleView",value:function(){this.setState({showContacts:!this.state.showContacts})}}]),n}(l.a.Component),A=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).state={showContacts:!1},o.toggleView=o.toggleView.bind(Object(i.a)(o)),o}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props.focus;return l.a.createElement("div",{className:"item-display"},l.a.createElement("h2",null,t.title),l.a.createElement("button",{onClick:this.toggleView},this.state.showContacts?"Project List":"Contacts"),this.state.showContacts?l.a.createElement(C,{item:t}):l.a.createElement(x,{focus:t}))}},{key:"toggleView",value:function(){this.setState({showContacts:!this.state.showContacts})}}]),n}(l.a.Component),D=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props.focus;return l.a.createElement("div",{className:"item-display"},l.a.createElement("h2",null,t.contactName.first+" "+t.contactName.last),l.a.createElement("span",null,t.email),l.a.createElement("span",null,t.phone),l.a.createElement("span",null,t.organization),l.a.createElement(x,{focus:t}),l.a.createElement(S,{focus:t}))}}]),n}(l.a.Component),P=(n(22),function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props.focus;return l.a.createElement("div",{id:"display"},t.itemType?this.displayItem(t.itemType):this.displayCollection(t.collectionType))}},{key:"displayItem",value:function(t){switch(t){case"todo":return l.a.createElement(L,{focus:this.props.focus});case"project":return l.a.createElement(I,{focus:this.props.focus});case"category":return l.a.createElement(A,{focus:this.props.focus});case"contact":return l.a.createElement(D,{focus:this.props.focus});default:throw new Error("item type not recognized")}}},{key:"displayCollection",value:function(t){switch(t){case"project":return l.a.createElement(w,{focus:this.props.focus});case"category":return l.a.createElement(k,{focus:this.props.focus});case"contact":return l.a.createElement(T,{focus:this.props.focus});default:throw new Error("collection type not recognized")}}}]),n}(l.a.Component)),W=n(6),V=n(8),F=n(25);function z(t){var e,n=Object(V.a)(t.tags?t.tags.list():[]);try{for(n.s();!(e=n.n()).done;){e.value.todoList.remove(t)}}catch(r){n.e(r)}finally{n.f()}var a,o=Object(V.a)(t.todoList?t.todoList.list():[]);try{for(o.s();!(a=o.n()).done;){var i=a.value;t.todoList.remove(i)}}catch(r){o.e(r)}finally{o.f()}var c=this.indexOf(t);this.splice(c,1)}function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"New Todo";this.itemType="todo",this.title=t,this.description="",this.urgency=0,this.isDone=!1,this.dueDate=new K,this.scheduleDate=new K,this.tags=new Q(this)}function J(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"New Project";this.itemType="project",this.title=e,this.description="",this.favorite=!1,this.urgency=0,this.isDone=!1,this.dueDate=new K,this.scheduleDate=new K,this.tags=new Q(this),this._todoList=q(this),this.todoList=Object.create(this._todoList),this.todoList.add=function(e){if(M.call(t,e))throw new Error("Looping projects");t._todoList.add(e)}}function M(t){return Object.getPrototypeOf(t)===J.prototype&&this.isChildOf(t)}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"New",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Contact";this.itemType="contact",this.contactName={first:t,last:e},this.email="",this.phone="",this.organization="",this.favorite=!1,this.tags=new Q(this),this.todoList=q(this)}function H(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"New Category";this.itemType="category",this.title=t,this.favorite=!1,this.todoList=q(this)}function q(t){var e=[];return{list:function(){return Array.from(e)},add:function(n){e.includes(n)||(e=[].concat(Object(W.a)(e),[n]),"contact"!==t.itemType&&n.tags.add(t))},remove:function(t){if(e.includes(t)){var n=e.indexOf(t);e=[].concat(Object(W.a)(e.slice(0,n)),Object(W.a)(e.slice(n+1)))}},place:function(t,n){e.includes(t)||(e=[].concat(Object(W.a)(e.slice(0,n)),[t],Object(W.a)(e.slice(n))))},sort:function(){e.sort(G)}}}function G(t,e){return t.urgency<e.urgency?1:t.urgency>e.urgency?-1:0}function K(){var t=null;Object.defineProperties(this,{date:{get:function(){return t},set:function(e){if(!F(e))throw new Error("Must enter a valid Date");t=e}}}),this.remove=function(){t=null}}function Q(t){var e=this;this.tags=new Set,this.add=function(n){e.tags.add(n),n.todoList&&n.todoList.add(t)},this.remove=function(t){e.tags.delete(t)},this.clear=function(){e.tags=new Set},this.list=function(){return Array.from(e.tags)}}function R(t){t.storageId=t.storageId||$.storageId++;var e=Object.assign({},t);t.todoList&&(e.todoListStorageData=t.todoList.list().map((function(t){return t.storageId})));for(var n=0,a=["todoList","_todoList","tags","dueDate","scheduleDate","createTag"];n<a.length;n++){delete e[a[n]]}return e}function U(t,e){var n=e.add();return Object.assign(n,t),n}function X(t,e){var n,a=Object(V.a)(t.todoListStorageData);try{var o=function(){var a=n.value,o=e.find((function(t){return t.storageId===a}));t.todoList.add(o)};for(a.s();!(n=a.n()).done;)o()}catch(i){a.e(i)}finally{a.f()}}J.prototype={isChildOf:function(t){var e=this.tags.list().filter((function(t){return"project"===t.itemType}));return!!e&&(e.includes(t)||e.some((function(e){return e.isChildOf(t)})))}};n(23);var Y={add:function(){}},Z={goTo:function(t){this.hideAddWindow(),this.app.setState({focus:t})},hideAddWindow:function(){this.app.setState({addWindowItemDestination:Y,addWindowVisible:!1})},showAddWindow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;this.app.setState({addWindowItemDestination:t,addWindowVisible:!0})}},$=new function(){var t=[],e=[],n=[],a=[],o=function(e){var n=new B(e);return t.push(n),n},i=function(t){var n=new J(t);return e.push(n),n},c=function(t){var e=new H(t);return a.push(e),e},r=function(t,e){var a=new _(t,e);return n.push(a),a};Object.defineProperties(this,{todos:{get:function(){var e=[].concat(t).filter((function(t){return t.tags.list().length>0}));return e.collectionType="todo",e.add=o,e.remove=z.bind(t),e}},projects:{get:function(){var t=[].concat(e);return t.collectionType="project",t.add=i,t.remove=z.bind(e),t}},contacts:{get:function(){var t=[].concat(n);return t.collectionType="contact",t.add=r,t.remove=z.bind(n),t}},categories:{get:function(){var t=[].concat(a);return t.collectionType="category",t.add=c,t.remove=z.bind(a),t}}})},tt=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var o;return Object(a.a)(this,n),o=e.call(this,t),Z.app=Object(i.a)(o),$.app=Object(i.a)(o),o.state={focus:$.projects,addWindowItemDestination:null,addWindowVisibility:!1},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage.itemManagerDataString;if(t){var e=JSON.parse(t);$.storageId=e.pop();var n=e[0].map((function(t){return U(t,$.todos)}));e[1].map((function(t){return U(t,$.projects)})),e[2].map((function(t){return U(t,$.categories)})),e[3].map((function(t){return U(t,$.contacts)}));for(var a=[].concat(Object(W.a)(n),Object(W.a)($.projects)),o=0,i=[$.projects,$.categories,$.contacts];o<i.length;o++){var c=i[o];c.map((function(t){return X(t,a)}))}console.log("Loaded")}}(),o}return Object(o.a)(n,[{key:"render",value:function(){return function(){$.storageId=$.storageId||1;for(var t=[],e=0,n=[$.todos,$.projects,$.categories,$.contacts];e<n.length;e++){var a=n[e];t.push(a.map(R))}t.push($.storageId),localStorage.itemManagerDataString=JSON.stringify(t),console.log("Saved")}(),l.a.createElement("div",{id:"app"},l.a.createElement(p,null),l.a.createElement(P,{focus:this.state.focus}),this.state.addWindowVisible?l.a.createElement(E,{destination:this.state.addWindowItemDestination,context:this.state.focus}):null)}}]),n}(l.a.Component);d.a.render(l.a.createElement(tt,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.fb9aadaa.chunk.js.map